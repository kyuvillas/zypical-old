<div layout="row" flex layout-align="start stretch">
	<div flex="30" layout="column" layout-align="start stretch" style="border-right: 1px solid rgba(0,0,0,.0975);">
		<div flex="none" layout layout-align="center" style="border-bottom: 1px solid rgba(0,0,0,.0975);height: 8%">
			<p class="md-title">messages</p>
		</div>
		<!-- <div flex layout="column" layout-align="start stretch"  class="scrollbar-macosx" data-jquery-scrollbar> -->
		<div flex layout="column" layout-align="start stretch"  >
			<a class="blacklink" href="" ng-click="loadMessage()">
			<div class="chat-item" ng-repeat="c in chats" layout="row" layout-align="start center" >
				<img  ng-src="{{c.storepic}}"  style="height:30px;width: 30px; margin:8" class="img-circle" />
				<div flex layout="column" layout-align="center start" >
					<b >{{c.storename}}</b>
					<span >{{c.lastmessage | limitTo: 20}}{{c.lastmessage.length > 20 ? '...' : ''}} </span>
				</div>
				<span>{{c.time}}</span>
			</div>
			</a>
		</div>
	</div>
	<div flex layout>
		<div layout="column" flex layout-align="start stretch" style=" border-bottom: 1px solid rgba(0,0,0,.0975)" ng-if="messageloaded" >
			<div flex="none" layout layout-align="center" style="border-bottom: 1px solid rgba(0,0,0,.0975);height: 8%">
				<p class="md-title">messages</p>
			</div>
			<!-- <div flex class="scrollbar-macosx" data-jquery-scrollbar id="messagewindow" > -->
			<div flex  id="messagewindow" >
				<div layout="column" layout-align="end stretch" flex="none" style="min-height: 63% !important;  ">
					<div ng-repeat="m in messages" >
						<div layout="column"   layout-align="center end" ng-if="m.userid==1">
							<div class="message-text right">
								{{m.message}} 
							</div>
							<span class="message-time" >{{m.time}}</span>
						</div>
						<div layout="column"  layout-align="center start" ng-if="m.userid!=1">
							<div layout>
								<div layout layout-align="center center">
									<img ng-src="{{m.storepic}}" style="height:25px;width: 25px; " class="img-circle" />
								</div>						
								<div class="message-text left">
									{{m.message}}
								</div>
							</div>
							<span class="message-time" >{{m.time}}</span>
						</div>
					</div>
				</div>
			</div>
			<div flex="10" layout style="margin-top: 16px">
				<form flex layout layout-align="space-between stretch" style="margin: 0">
					<input flex layout-margin placeholder="Enter message" id="text" type="text" ng-model="text"/>
					<!-- <input flex placeholder="Enter message" id="text" type="text" ng-model="id"/> -->
					<md-button flex="10" class="action-button" type="submit" ng-click="send(text,id)">Send</md-button>
				</form>
			</div>

		</div>
		<div layout="column" layout-align="center center" ng-show="messageloaded == false">
			<md-progress-circular  md-diameter="25" ng-show="messageloaded"></md-progress-circular>
		</div>
	</div>

</div>
<script>
	// $(document).ready(function(){
	//     $('#messagewindow').animate({
	//         scrollTop: $('#messagewindow')[0].scrollHeight}, 1000);
	// });
</script>
<style>
	.chat-item:hover{
			background-color: rgba(0,0,0,0.1);
	}
	.chat-item{
		height: 60px;font-size: 0.9em;
	}
	.message-container{
		width:100%;
		height: 65%;
	}
	.message-text{
		display: -webkit-inline-box;
		background-color: green; 
		margin: 8 8 2 8;
		padding:5;     
		display: initial;
		border-radius: 5px;
	}
	.message-text.right{
		background-color: #01a982;
		color: white
	}
	.message-text.left{
		border: 1px solid rgba(0,0,0,0.7);
		background-color: rgb(250,250,250);
	}
	.message-time{
		line-height: 0.9em;
	    margin-left: 36px;
	    font-size: 0.8em;
	    color: gray
	}

</style>